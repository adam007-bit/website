<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portal Pembelajaran Arduino</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 30px;
      background-color: #f4f6f9;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .card {
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 30px;
      margin: 20px 0;
      width: 100%;
      max-width: 600px;
      text-align: center;
    }
    .btn {
      background-color: #007bff;
      border: none;
      color: white;
      padding: 10px 18px;
      margin: 10px 5px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.2s;
    }
    .btn:hover {
      background-color: #0056b3;
      transform: scale(1.05);
    }
    progress {
      width: 100%;
      height: 20px;
      margin-top: 10px;
    }
    .badge {
      padding: 8px 16px;
      background: gold;
      border-radius: 12px;
      display: inline-block;
      margin-top: 10px;
      font-weight: bold;
      animation: pop 0.5s ease;
    }
    @keyframes pop {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    #confetti-canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 9999;
    }
  </style>
</head>
<body>

<!-- Main Content -->
<canvas id="confetti-canvas"></canvas>
<div class="card">
  <h1 id="welcomeUser">Selamat Datang</h1>
  <p id="introText" style="font-weight: bold; font-family: 'Courier New', Courier, monospace;">
    Portal Pembelajaran Arduino ini direka khas untuk membantu pelajar sekolah memahami asas mikropengawal dan elektronik secara interaktif melalui kuiz, modul dan aktiviti yang menarik.
  </p>
</div>

<div class="card">
  <h2 id="quizTitle">ðŸŽ¯ Kuiz Arduino</h2>
  <button id="startQuizButton" class="btn" onclick="startQuiz()">Mula Kuiz</button>
  <div id="question" style="margin-top: 15px;"></div>
  <div id="quiz-options"></div>
  <progress id="quizProgress" value="0" max="100"></progress>
  <div id="quiz-result" style="margin-top: 10px; font-weight: bold;"></div>
  <div id="badge"></div>
</div>

<script>
  const questions = [
    { q: "Apakah itu Arduino?", options: ["Robot", "Sensor", "Mikropengawal", "Perisian"], a: "Mikropengawal" },
    { q: "Arduino UNO menggunakan cip apa?", options: ["ATmega328P", "ESP32", "PIC16F877A", "ARM Cortex"], a: "ATmega328P" },
    { q: "Apakah nama perisian rasmi untuk menulis kod Arduino?", options: ["Arduino Studio", "Arduino IDE", "CodeBlocks", "AVR Editor"], a: "Arduino IDE" },
    { q: "Apakah fungsi pin GND pada Arduino?", options: ["Sumber kuasa", "Ground", "Input analog", "Output digital"], a: "Ground" },
    { q: "Apakah maksud PWM?", options: ["Power Width Module", "Pulse Width Modulation", "Push With Motor", "Pin Wire Mode"], a: "Pulse Width Modulation" },
    { q: "Komponen apa yang mengesan cahaya?", options: ["LDR", "Buzzer", "Relay", "Motor"], a: "LDR" },
    { q: "Apakah kelebihan Arduino?", options: ["Harga mahal", "Sukar digunakan", "Mudah diprogram & open source", "Tiada komuniti"], a: "Mudah diprogram & open source" },
    { q: "Apakah pin yang digunakan untuk input analog?", options: ["A0-A5", "D0-D13", "GND", "VIN"], a: "A0-A5" },
    { q: "Arduino boleh disambung dengan?", options: ["Motor sahaja", "Lampu sahaja", "Pelbagai sensor & aktuator", "Speaker sahaja"], a: "Pelbagai sensor & aktuator" },
    { q: "Bahasa pengaturcaraan utama Arduino?", options: ["Python", "C/C++", "Java", "HTML"], a: "C/C++" }
  ];

  function startQuiz() {
    let current = 0, score = 0;
    const qDiv = document.getElementById("question");
    const optsDiv = document.getElementById("quiz-options");
    const resultDiv = document.getElementById("quiz-result");
    const bar = document.getElementById("quizProgress");
    const badgeDiv = document.getElementById("badge");
    badgeDiv.innerHTML = "";
    stopConfetti();

    function showQuestion() {
      if (current >= questions.length) {
        resultDiv.innerText = `Skor: ${score}/${questions.length}`;
        showBadge(score, questions.length);
        startConfetti();
        optsDiv.innerHTML = '<button class="btn" onclick="startQuiz()">Ulang Kuiz</button>';
        return;
      }

      const q = questions[current];
      qDiv.innerText = `Soalan ${current+1}: ${q.q}`;
      optsDiv.innerHTML = '';
      resultDiv.innerText = '';

      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.innerText = opt;
        btn.onclick = () => {
          if (opt === q.a) {
            score++;
            resultDiv.innerText = "âœ… Betul!";
          } else {
            resultDiv.innerText = `âŒ Salah. Jawapan: ${q.a}`;
          }
          setTimeout(() => {
            current++;
            bar.value = (current / questions.length) * 100;
            showQuestion();
          }, 1000);
        };
        optsDiv.appendChild(btn);
      });

      bar.value = (current / questions.length) * 100;
    }
    showQuestion();
  }

  function showBadge(score, total) {
    const badgeDiv = document.getElementById("badge");
    let badge = "";
    if (score === total) {
      badge = "ðŸ… Lencana Emas! Hebat!";
    } else if (score >= total * 0.7) {
      badge = "ðŸ¥ˆ Lencana Perak! Bagus!";
    } else if (score >= total * 0.4) {
      badge = "ðŸ¥‰ Lencana Gangsa! Cuba lagi!";
    } else {
      badge = "ðŸ’ª Teruskan latihan!";
    }
    badgeDiv.innerHTML = `<div class="badge">${badge}</div>`;
  }

  // Confetti effect (simple canvas confetti)
  let confettiInterval;
  function startConfetti() {
    const canvas = document.getElementById("confetti-canvas");
    const ctx = canvas.getContext("2d");
    let pieces = [];

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function randomPiece() {
      return {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        w: 10,
        h: 10,
        color: `hsl(${Math.random() * 360}, 100%, 50%)`,
        dy: Math.random() * 3 + 2
      };
    }

    pieces = Array.from({ length: 100 }, randomPiece);

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (const p of pieces) {
        p.y += p.dy;
        if (p.y > canvas.height) {
          p.y = -10;
          p.x = Math.random() * canvas.width;
        }
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, p.w, p.h);
      }
    }

    confettiInterval = setInterval(update, 30);
  }

  function stopConfetti() {
    clearInterval(confettiInterval);
    const canvas = document.getElementById("confetti-canvas");
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
</script>
</body>
</html>
